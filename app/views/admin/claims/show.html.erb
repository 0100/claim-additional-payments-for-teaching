<%= link_to "Back", admin_claims_path, class: "govuk-back-link" %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <% if @claim.payroll_gender_missing? %>
      <div class="govuk-body-l govuk-flash__notice">
        This claim cannot be approved, the payroll gender is missing and the claim will need to be referred
      </div>
    <% end %>

    <h1 class="govuk-heading-xl">
      Claim <%= @claim.reference %>
    </h1>

    <%= render partial: "answer_section", locals: {heading: "Personal details", answers: admin_personal_details(@claim)} %>

    <%= render partial: "answer_section", locals: {heading: "Eligibility details", answers: admin_eligibility_answers(@claim.eligibility)} %>

    <%= render partial: "answer_section", locals: {heading: "Student loan details", answers: admin_student_loan_details(@claim)} %>

    <%= render partial: "answer_section", locals: {heading: "Submission details", answers: admin_submission_details(@claim)} %>

    <% if @claim.payroll_gender_missing? %>
      <div class="govuk-warning-text">
        <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
        <strong class="govuk-warning-text__text">
          <span class="govuk-warning-text__assistive">Warning</span>
          This claim cannot be approved, the payroll gender is missing and the claim will need to be referred
        </strong>
      </div>
    <% end %>

    <%= form_for Check.new, url: admin_claim_checks_path(@claim) do |form| %>
      <fieldset class="govuk-fieldset govuk-!-margin-bottom-6">
        <legend class="govuk-fieldset__legend govuk-fieldset__legend--l govuk-!-margin-bottom-6">
          <h2 class="govuk-fieldset__heading">
            Claim decision
          </h2>
        </legend>
        <div class="govuk-radios">
          <%= form.hidden_field :result %>
          <div class="govuk-radios__item">
            <%= form.radio_button(:result, "approved", class: "govuk-radios__input", disabled: @claim.payroll_gender_missing?) %>
            <%= form.label "result_approved", "Approve", class: "govuk-label govuk-radios__label" %>
          </div>
          <div class="govuk-radios__item">
            <%= form.radio_button(:result, "rejected", class: "govuk-radios__input") %>
            <%= form.label "result_rejected", "Reject", class: "govuk-label govuk-radios__label" %>
          </div>
        </div>
      </fieldset>
      <%= form.submit "Submit", class: "govuk-button" %>
    <% end %>
  </div>
</div>
